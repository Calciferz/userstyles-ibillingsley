/* ==UserStyle==
@name           YouTube Full Theater
@namespace      github.com/ibillingsley
@version        1.1.0
@description    Full screen theatre mode for YouTube
@author         Isaiah Billingsley
@homepageURL    https://github.com/ibillingsley/userstyles
@license        0BSD
==/UserStyle== */

@-moz-document url-prefix("https://www.youtube.com/watch") {

  /* Player occupies full screen height */
  .ytd-page-manager[theater]:not([fullscreen]) #player-wide-container,
  .ytd-page-manager[theater]:not([fullscreen]) #player-theater-container,
  .ytd-page-manager[theater]:not([fullscreen]) #full-bleed-container {
    max-height: 100vh;
    min-height: 100vh;
  }

  /* Hide top bar in theater mode */
  #masthead[fullscreen],
  #masthead[theater] {
    /* Collapse #masthead-container */
    position: fixed;
  }

  /* Theater mode top bar is hidden by default */
  #masthead[theater]:not([fullscreen]) {
    /* Hide top bar */
    opacity: 0;
    /* Fade in-out */
    transition: opacity 0.7s ease-out;
  }
  /* Show top bar on hover and when search is focused */
  #masthead[theater]:not([fullscreen]):is(:focus-within, :hover) {
    opacity: 1;
    /* Fade in faster */
    transition-duration: 0.1s;
  }

  /* Fullscreen top bar slides out */
  ytd-app[masthead-hidden] #masthead-container.ytd-app {
    /* Fix miscalculated height for animation */
    transform: translateY(-61px); /* masthead is 56px, extra 5px */
  }


  /* Replace player top margin with #masthead-container */
  #masthead-container.ytd-app {
    /* Occupy the necessary space for #masthead in basic mode */
    position: sticky;
  }
  /* Remove top margin */
  #page-manager.ytd-app {
    margin-top: 0;
  }


  /* Move buttons in top-right corner below the top bar in theater mode */
  .ytd-page-manager[theater]:not([fullscreen]) .ytp-overflow-panel-close,
  .ytd-page-manager[theater]:not([fullscreen]) .ytp-chrome-top {
    padding-top: 50px; /* masthead is 56px, buttons have 6px padding */
    height: unset;
  }
  /* Move endscreen video grid below the title */
  .ytd-page-manager[theater]:not([fullscreen]) .ytp-endscreen-content {
    top: calc(50% + 50px);
  }


  /* Search suggestions popup was off-screen */
  .gstl_50.sbdd_a {
    /* Fix miscalculated position when scrolled down */
    top: 52px !important;
  }

}
